{% import "macros/bs_modal.html" as bs_modal %}
{% import "macros/bs_offcanvas.html" as bs_offcanvas %}


{% include "/includes/html_head_start.html" %}

<!-- page title -->
<title>View or Update Master Records | Librarian</title>

<!-- custom css -->
<!-- <link rel="stylesheet" href="{{ url_for('static', filename = 'css/common.css') }}" /> -->

<link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.css" />

{% include "/includes/html_head_end.html" %}

<body class="">
	<!-- NAVBAR STARTS : common to all librarian pages -->
	{% include "includes/navbar.html" %}
	<!-- NAVBAR ENDS -->

	<div class="container pt-5">
		<h1 class="mb-5">View & Update Records</h1>

		<div class="row">
			<div class="col">
				<!-- master selection -->
				<select id="view_master_select" class="form-select form-select-sm mb-3"
					aria-label="Select master to view" autofocus>
					<option value="" selected>Select Master</option>
					<option value="author">Author</option>
					<option value="publisher">Publisher</option>
					<option value="category">Category</option>
					<option value="genre">Genre</option>
					<option value="language">Language</option>
				</select>
			</div>
		</div>

		<hr class="border-secondary mb-3" />

		<div class="table-responsive mb-5">
			<table id="theDataTable" class="table table-striped table-hover caption-top">
			</table>
		</div>

		<!-- Update author records offcanvas -->
		{% call bs_offcanvas.BS_OFFCANVAS('informationOffcanvas_author', 'Update the selected author') %}
		<div class="offcanvas-body px-4">
			<form class="form" action="" method="POST" name="update-author-name-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Author's Name"
							name="updated_name" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>
				<input type="hidden" app-data-id="hidden_author_id" name="author_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form" action="" method="POST" name="update-author-bio-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Author's Bio" name="updated_bio" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_author_id" name="author_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="update-author-active-status-form">
				<div class="row">
					<div class="col-6 offset-md-2 form-check align-self-center form-switch form-check-reverse mb-3">
						<label class="form-check-label" for="update_author_active_status_checkbox">Active Status</label>
						<input class="form-check-input" type="checkbox" role="switch" name="updated_active_status"
							id="update_author_active_status_checkbox">
					</div>

					<div class="col-4">
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_author_id" name="author_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="delete-author-form">
				<div class="row">
					<div class="col">
						<button class="btn btn-outline-danger" type="submit">Delete ?</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_author_id" name="author_id" value="" />
			</form>

		</div>
		{% endcall %}

		<!-- Update publisher records offcanvas -->
		{% call bs_offcanvas.BS_OFFCANVAS('informationOffcanvas_publisher', 'Update the selected publisher') %}
		<div class="offcanvas-body px-4">
			<form class="form" action="" method="POST" name="update-publisher-name-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Publisher's Name"
							name="updated_name" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>
				<input type="hidden" app-data-id="hidden_publisher_id" name="publisher_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form" action="" method="POST" name="update-publisher-desc-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Publisher's Description"
							name="updated_bio" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_publisher_id" name="publisher_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="update-publisher-active-status-form">
				<div class="row">
					<div class="col-6 offset-md-2 form-check align-self-center form-switch form-check-reverse mb-3">
						<label class="form-check-label" for="update_publlisher_active_status_checkbox">Active
							Status</label>
						<input class="form-check-input" type="checkbox" role="switch" name="updated_active_status"
							id="update_publlisher_active_status_checkbox">
					</div>

					<div class="col-4">
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_publisher_id" name="publisher_id" value="" />
			</form>
			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="delete-publisher-form">
				<div class="row">
					<div class="col">
						<button class="btn btn-outline-danger" type="submit">Delete ?</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_publisher_id" name="publisher_id" value="" />
			</form>
		</div>
		{% endcall %}

		<!-- Update category records offcanvas -->
		{% call bs_offcanvas.BS_OFFCANVAS('informationOffcanvas_category', 'Update the selected category') %}
		<div class="offcanvas-body px-4">
			<form class="form" action="" method="POST" name="update-category-name-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Category's Name"
							name="updated_name" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>
				<input type="hidden" app-data-id="hidden_category_id" name="category_id" />
			</form>

			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="update-category-active-status-form">
				<div class="row">
					<div class="col-6 offset-md-2 form-check align-self-center form-switch form-check-reverse mb-3">
						<label class="form-check-label" for="update_category_active_status_checkbox">Active
							Status</label>
						<input class="form-check-input" type="checkbox" role="switch" name="updated_active_status"
							id="update_category_active_status_checkbox">
					</div>

					<div class="col-4">
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_category_id" name="category_id" />
			</form>
			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="delete-category-form">
				<div class="row">
					<div class="col">
						<button class="btn btn-outline-danger" type="submit">Delete ?</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_category_id" name="category_id" value="" />
			</form>
		</div>
		{% endcall %}


		<!-- Update genre records offcanvas -->
		{% call bs_offcanvas.BS_OFFCANVAS('informationOffcanvas_genre', 'Update the selected genre') %}
		<div class="offcanvas-body px-4">
			<form class="form" action="" method="POST" name="update-genre-name-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Genre's Name"
							name="updated_name" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>
				<input type="hidden" app-data-id="hidden_genre_id" name="genre_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="update-genre-active-status-form">
				<div class="row">
					<div class="col-6 offset-md-2 form-check align-self-center form-switch form-check-reverse mb-3">
						<label class="form-check-label" for="update_genre_active_status_checkbox">Active Status</label>
						<input class="form-check-input" type="checkbox" role="switch" name="updated_active_status"
							id="update_genre_active_status_checkbox">
					</div>

					<div class="col-4">
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_genre_id" name="genre_id" />
			</form>
			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="delete-genre-form">
				<div class="row">
					<div class="col">
						<button class="btn btn-outline-danger" type="submit">Delete ?</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_genre_id" name="genre_id" value="" />
			</form>
		</div>
		{% endcall %}

		<!-- Update language records offcanvas -->
		{% call bs_offcanvas.BS_OFFCANVAS('informationOffcanvas_language', 'Update the selected language') %}
		<div class="offcanvas-body px-4">
			<form class="form" action="" method="POST" name="update-language-name-form">
				<div class="row">
					<div class="input-group mb-3">
						<input type="text" class="form-control" placeholder="Updated Language's Name"
							name="updated_name" />
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>
				<input type="hidden" app-data-id="hidden_language_id" name="language_id" value="" />
			</form>

			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="update-language-active-status-form">
				<div class="row">
					<div class="col-6 offset-md-2 form-check align-self-center form-switch form-check-reverse mb-3">
						<label class="form-check-label" for="update_language_active_status_checkbox">Active
							Status</label>
						<input class="form-check-input" type="checkbox" role="switch" name="updated_active_status"
							id="update_language_active_status_checkbox">
					</div>

					<div class="col-4">
						<button class="btn btn-outline-warning" type="submit">Update</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_language_id" name="language_id" value="" />
			</form>
			<hr class="border-danger" />

			<form class="form text-center" action="" method="POST" name="delete-language-form">
				<div class="row">
					<div class="col">
						<button class="btn btn-outline-danger" type="submit">Delete ?</button>
					</div>
				</div>

				<input type="hidden" app-data-id="hidden_language_id" name="language_id" value="" />
			</form>
		</div>
		{% endcall %}

	</div>

	{% include "/includes/bs_toast.html" %}

</body>

{# including HTML script tag' #}
{% include "/includes/scripts.html" %}

<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
	integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>

<script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>

<script type="module" src="{{ url_for('static', filename = 'js/pages/lib/view_master.js') }}"></script>

<script type="text/javascript">
	function openSideAuthorPanel(event) {
		document.querySelectorAll("input[app-data-id='hidden_author_id']").forEach(element => {
			element.setAttribute(
				"value"
				, event.parentElement.parentElement.getAttribute("id")
			);
		});

		if (event.parentElement.parentElement.getAttribute("class").includes("success")) {
			document.getElementById("update_author_active_status_checkbox").setAttribute(
				"checked"
				, "checked"
			);
		}
	}

	function openPublisherSidePanel(event) {
		document.querySelectorAll("input[app-data-id='hidden_publisher_id']").forEach(element => {
			element.setAttribute(
				"value"
				, event.parentElement.parentElement.getAttribute("id")
			);
		});

		if (event.parentElement.parentElement.getAttribute("class").includes("success")) {
			document.getElementById("update_publisher_active_status_checkbox").setAttribute(
				"checked"
				, "checked"
			);
		}
	}

	function openCategorySidePanel(event) {

		document.querySelectorAll("input[app-data-id='hidden_category_id']").forEach(element => {
			element.setAttribute(
				"value"
				, event.parentElement.parentElement.getAttribute("id")
			);
		});

		if (event.parentElement.parentElement.getAttribute("class").includes("success")) {
			document.getElementById("update_category_active_status_checkbox").setAttribute(
				"checked"
				, "checked"
			);
		}
	}

	function openGenreSidePanel(event) {
		document.querySelectorAll("input[app-data-id='hidden_genre_id']").forEach(element => {
			element.setAttribute(
				"value"
				, event.parentElement.parentElement.getAttribute("id")
			);
		});

		if (event.parentElement.parentElement.getAttribute("class").includes("success")) {
			document.getElementById("update_genre_active_status_checkbox").setAttribute(
				"checked"
				, "checked"
			);
		}
	}

	function openLanguageSidePanel(event) {
		document.querySelectorAll("input[app-data-id='hidden_language_id']").forEach(element => {
			element.setAttribute(
				"value"
				, event.parentElement.parentElement.getAttribute("id")
			);
		});

		if (event.parentElement.parentElement.getAttribute("class").includes("success")) {
			document.getElementById("update_language_active_status_checkbox").setAttribute(
				"checked"
				, "checked"
			);
		}
	}
</script>

</html>